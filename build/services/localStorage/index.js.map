{"version":3,"file":"index.js","names":["LocalStorage","db","root","os","homedir","dbPath","fs","existsSync","mkdirSync","writeFileSync","readJsonFile","key","checkDB","value","writeFile","JSON","stringify","Tools"],"sources":["../../../source/services/localStorage/index.js"],"sourcesContent":["import fs from \"fs\";\nimport os from \"os\";\nimport Tools from \"tools\";\n\nclass LocalStorage extends Tools {\n  constructor() {\n    super();\n    this.db = null;\n    this.root = `${os.homedir()}/.jobs-tracking`;\n    this.dbPath = `${this.root}/db.json`;\n  }\n\n  checkDB() {\n    if (!fs.existsSync(this.dbPath)) {\n      fs.mkdirSync(this.root);\n      fs.writeFileSync(this.dbPath, \"{}\");\n    }\n    \n    if (!this.db) {\n      this.db = this.readJsonFile(this.dbPath);\n    }\n  }\n\n  getItem(key) {\n    this.checkDB();\n    return this.db[key];\n  }\n\n  async setItem(key, value) {\n    this.checkDB();\n    this.db[key] = value;\n    await this.writeFile(this.dbPath, JSON.stringify(this.db));\n  }\n\n  async removeItem(key) {\n    this.checkDB();\n    delete this.db[key];\n    await this.writeFile(this.dbPath, JSON.stringify(this.db));\n  }\n}\n\nexport default new LocalStorage();\n"],"mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AAA0B;AAAA;AAAA,IAEpBA,YAAY;EAAA;EAAA;EAChB,wBAAc;IAAA;IAAA;IACZ;IACA,MAAKC,EAAE,GAAG,IAAI;IACd,MAAKC,IAAI,aAAMC,cAAE,CAACC,OAAO,EAAE,oBAAiB;IAC5C,MAAKC,MAAM,aAAM,MAAKH,IAAI,aAAU;IAAC;EACvC;EAAC;IAAA;IAAA,OAED,mBAAU;MACR,IAAI,CAACI,cAAE,CAACC,UAAU,CAAC,IAAI,CAACF,MAAM,CAAC,EAAE;QAC/BC,cAAE,CAACE,SAAS,CAAC,IAAI,CAACN,IAAI,CAAC;QACvBI,cAAE,CAACG,aAAa,CAAC,IAAI,CAACJ,MAAM,EAAE,IAAI,CAAC;MACrC;MAEA,IAAI,CAAC,IAAI,CAACJ,EAAE,EAAE;QACZ,IAAI,CAACA,EAAE,GAAG,IAAI,CAACS,YAAY,CAAC,IAAI,CAACL,MAAM,CAAC;MAC1C;IACF;EAAC;IAAA;IAAA,OAED,iBAAQM,GAAG,EAAE;MACX,IAAI,CAACC,OAAO,EAAE;MACd,OAAO,IAAI,CAACX,EAAE,CAACU,GAAG,CAAC;IACrB;EAAC;IAAA;IAAA;MAAA,6FAED,iBAAcA,GAAG,EAAEE,KAAK;QAAA;UAAA;YAAA;cACtB,IAAI,CAACD,OAAO,EAAE;cACd,IAAI,CAACX,EAAE,CAACU,GAAG,CAAC,GAAGE,KAAK;cAAC;cAAA,OACf,IAAI,CAACC,SAAS,CAAC,IAAI,CAACT,MAAM,EAAEU,IAAI,CAACC,SAAS,CAAC,IAAI,CAACf,EAAE,CAAC,CAAC;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA,CAC3D;MAAA;QAAA;MAAA;MAAA;IAAA;EAAA;IAAA;IAAA;MAAA,gGAED,kBAAiBU,GAAG;QAAA;UAAA;YAAA;cAClB,IAAI,CAACC,OAAO,EAAE;cACd,OAAO,IAAI,CAACX,EAAE,CAACU,GAAG,CAAC;cAAC;cAAA,OACd,IAAI,CAACG,SAAS,CAAC,IAAI,CAACT,MAAM,EAAEU,IAAI,CAACC,SAAS,CAAC,IAAI,CAACf,EAAE,CAAC,CAAC;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA,CAC3D;MAAA;QAAA;MAAA;MAAA;IAAA;EAAA;EAAA;AAAA,EAlCwBgB,iBAAK;AAAA,eAqCjB,IAAIjB,YAAY,EAAE;AAAA"}